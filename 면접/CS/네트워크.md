## 블로킹 넌블로킹

## 네트워크
* 네트워크는 수많은 라우터와 연결로 이루어져 있고, 그 끝에는 실제 네트워크에 접속하는 장비들이 있다
  
* 네트워크 엣지와 코어로 이루어져 있다
* 네트워크 엣지
    * 브라우저, 이메일 등 종단 장치를 의미합니다.
* 네트워크 코어

## 데이터 전송 두 가지 방법
* circuit switching
    * 엣지간 연결 경로 유지
    * 비효율적
* Packet switching
    * 데이터를 패킷단위로 나눠 알아서 전송


## 네트워크
다양한 유형의 호스트와 스위치들을 통신 링크로 연결한 분산 시스템
* 호스트, 스위치가 링크로 연결된 분산 시스템

* 호스트
    * 인터넷 끝에 연결된 종단장치
    * PC, 스마트폰 등
* 링크 
    * 통신 장치들 간에 패킷을 전달하는 유, 무선 매체
    * 구리선 WIFI 등
* 스위치
    * 다수의 통신 장치를 통신 링크로 연결하는 장치
    * 입력 링크로 받은 패킷을 출력 링크로 전달
    * 라우터 등

## Cast 종류
* UniCast 
    * 1 : 1 통신
* Multicast
    * 1 : N 통신
* Broadcast
    * 1 : all 통신

## ISP
인터넷 서비스 제공자와 그 조직이 운영하는 네트워크

## 프로토콜
인터넷 장치들 간의 정보 교환을 제어하는 규칙

## 클라이언트-서버 구조
* 클라이언트
    * 서버에게 응용 서비스 요청
    * 필요할 때만 작동
    * 동적 IP
* 서버
    * 클라이언트 서비스 요청에 응답
    * 항상 작동
    * 고정 IP 주소

## 소켓(Socket)
* 응용 프로세스가 네트워크로 메시지를 송수신하는 통로 자료구조
* 트랜스포트 계층 상에서 구현
    * 애플리케이션 계층에서 보기에는 트랜스포트계층이 데이터 주고받는 것으로 보임
* 소켓 자료구조를 사용하여 통신 서비스를 제공하는 프로그램 인터페이스
* 소켓 API 가져다 응용 프로그램 구현

소켓 주소는 IP주소 + Port 번호로 이루어져 있다


## 패킷
전송 장치 간에 전달되는 정보 단위

데이터 링크 계층의 단위, 긴 메시지를 작은 패킷 단위로 나누어 전송한다

## Url을 입력했을 때 과정
도메인, ip, TCP 연결, 전송

1. 사용자가 URL 브라우저에 입력
2. 브라우저는 DNS를 통해 IP주소 획득
3. IP 주소를 통해 서버와 TCP 3 way handshake를 통해 연결
3. HTTP프로토콜을 통해 HTTP요청 메시지 생성
4. TCP/IP 연결을 통해 HTTP 요청 서버로 전송
5. 서버는 HTTP응답 메시지 회신
6. TCP/IP 연결을 통해 요청한 컴퓨터로 전송
7. 도착한 HTTP 응답 메시지 웹 페이지 데이터로 변환

## TCP, UDP
트랜스포트 계층의 프로토콜

* TCP
    * 연결지향적
    * 신뢰성 보장
    * 혼잡제어
        * 트래픽이 몰려 버퍼가 찬 경우 전송속도 조절합니다
    * 흐름제어
        * 몰라
    * 3wh, 4wh, 연결, 연결해제
* UDP
    * 비연결형 프로토콜
    * 연결을 유지하지 않기 때문에 패킷이 각각 다른 경로로 전송되게 됩니다
    * 신뢰성이 낮고, checksum을 통해 최소한의 오류만 검출합니다
    * 스트리밍 등에 사용됩니다

## HTTP Method
## GET
데이터를 조회하기 위해 사용하는 HTTP 메서드입니다

데이터를 헤더에 추가하여 전송하고 URL에 데이터가 노출되기때문에 보안적으로 중요한 것을 포함하면 안됩니다

## POST
바디에 데이터를 추가하여 전송하게 됩니다.


## 공인 IP vs 사설 IP
ISP가 공급하는 유일한 주소입니다

공개되었기 때문에 인터넷에 연결된 다른 장비로부터 접근 가능합니다

인터넷 상에서 유일합니다

사설IP
* 가정이나 회사 등의 네트워크에서 사용하는 IP입니다. 공개되지않고 외부에서 접근이 불가능하고, 외부로 접근도 불가능합니다
* 라우터가 할당하게 됩니다
* 하나의 네트워크 안에서 유일합니다
* IPv4의 IP부족문제를 해결하여 줍니다



## TCP/IP 4계층
* 애플리케이션
    * FTP,HTTP,SSH
    * 응용 프로그램간 자료 송수신
* 트랜스포트
    * TCP,UDP
    * 호스트간 자료 송수신
* 인터넷
    * IP, ARP
    * 데이터 전송을 위한 논리적 주소 및 경로 지정
* 네트워크
    * MAC, LAN
    * 실제 데이터 전송

## OSI 7계층(웹 접근성 국제표준)
네트워크 통신을 7개의 계층으로 분리한 것입니다. 이를 통해 각 단계별로 의존성을 끊고 각자의 책임을 가지며 유지보수하고 개발하기 편해지는 장점이 있습니다.

캡슐화
* 상위 계층에서 받은 정보를 자신의 계층의 제어정보를 헤더화시켜 붙여 하위 계층으로 보냄

* 응용
    * 사용자가 네트워크 자원에 접근하는 방법을 제공
    * FTP, SMTP, HTTP
    * 응용 서비스를 수행하는 계층
    * 사용자에게 직접 보인다
* 프레젠테이션
    * 데이터 형식과 암호화 등을 담당한다
    * SSL, SSH, JPG
* 세션
    * 데이터가 통신하기 위한 논리적인 연결
    * TCP/IP 세션을 만들고 없애는 책임
* 트랜스포트
    * TCP, UDP
    * 종단간 신뢰성 있는 전송 보장
    * 흐름제어, 혼잡제어 등을 담당
* 네트워크 계층
    * 데이터가 목적지까지 가장 안전하고 빠른 경로를 찾아줍니다
    * 이것을 라우팅이라 한다
    * 경로를 선택하고, 주소를 정하고, 패킷을 전달
    * 대표적 장비로 라우터
    * 주소를 부여(IP)하고 경로를 설정(라우팅)
* 데이터링크
    * 물리계층간 오류와 흐름제어
    * 두 장치간 신뢰성 있는 전송을 보장
    * 스위치나 브릿지
* 물리 계층
    * 0, 1 비트 데이터를 케이블 등을 통해 전송

## 세그멘테이션

## 디세그멘테이션

## TCP
* 연결형 서비스 신뢰성 보장
    * 데이터 분실, 중복, 순서 등을 보장
* 3-way 논리적 연결, 4-way 해제
* 흐름제어
    * 송신 TCP가 지나치게 많은 데이터를 한꺼번에 송신함으로써 수신 TCP의 버퍼가 넘쳐 데이터 손실이 발생하는 문제를 방지하는 메카니즘 
* 혼잡제어
    * 송신측의 데이터 전달과 네트워크 데이터 처리 속도의 차이를 해결하기 위한 기법

## UDP
* 비연결형 서비스, 신뢰성이 보장되지 않는다
* 헨드쉐이킹과 혼잡, 흐름제어를 하지 않기 때문에 빠르다
* 스트리밍 등에 사용

## 캡슐화
프로토콜의 교환 정보는 *데이터 정보*와 *제어 정보*가 있다

* 데이터 정보 : 사용자가 전송을 의뢰한 정보
* 제어 정보 : 프로토콜을 수행하기 위해 상대방 프로토콜에 제공하는 정보를 제어 정보

상위 프로토콜에서 하위 프로토콜로 전송할 정보를 보내면, 자신의 제어정보를 헤더로 붙여 다시 하위 프로토콜로 전달 하거나 전송

## HTTP 프로토콜
웹 브라우저와 웹 서버간 요청 정보와 응답 정보 교환 규칙 정의

## HTTP 프로토콜 연결 방법

## HTTP, HTTPS 차이
HTTP Secure로 암호화가된 프로토콜로 제 3자가 볼 수 없도록 암호화를 지원합니다

443포트를 사용합니다

대칭키 방식과 비대칭 방식을 모두 사용하는데, 비대칭방식으로 대칭키를 발급받은 후 대칭키를 이용하여 세션키를 발급하여 암호화에 사용합니다.

대칭 방식이 더 빠름

## 3-way hand shake
TCP가 장치들간 논리적 연결을 수립하기 위한 과정

• 양쪽 모두 데이타를 전송할 준비가 되었다는 것을 보장하고, 실제로 데이타 전달이 시작하기전에 한쪽이 다른 쪽이 준비되었다는 것을 알수 있도록 한다.
• 양쪽 모두 상대편에 대한 초기 순차일련변호를 얻을 수 있도록 한다.

1. 클라이언트가 서버에게 접속을 요청하는 SYN 패킷 전송
    * syn flag 비트를 0
2. 서버는 SYN을 받아 요청을 수락한다는 ACK와 SYN을 클라이언트에게 전달
    * 
3. 클라이언트는 정상 수령했다면 ACK 반환
    * flag를 ack

이러면 연결이 된 것 

## 4-way hand shake
TCP연결을 종료하기 위한 프로토콜

1. 클라이언트가 연결을 종료하겠다는 FIN플래그 전송
2. 서버는 ACK을 모낸 다음 자신의 통신이 끝날때까지 wait
3. 서버가 통신이 끝났으면 연결이 종료되었다 클라이언트에게 FIN 전송
4. 클라이언트는 ACK 후 일정기간 기다림(time-wait)

## IP
* 비 연결지향
* 신뢰할 수 없음
    * 가능한 범위 내에서 패킷을 전달하는 최선형 서비스
* 주소지정
* 경로설정
    * 목적지 IP 주소를 기반으로 패킷 전달 경로를 판단

## 사설 IP 공용 IP


## HTTP1 vs HTTP2

## 웹 서버와 WAS
WAS 동적 데이터를 제공하는 서버
WS : 정적 데이터를 제공하는 서버

## HTTP 상태코드
* 1xx : 요청을 받았고 프로세스 진행중
    * 서버는 잘 받았고
    * 서버에 연결된 클라이언트는 작업을 게속하라

* 2xx : 성공
    * 201 crerated
    * 202 accepted
* 3xx : 요청 완료를 위해 추가 작업 조치 필요
* 4xx : 요청이 잘못됨
    * 400 : 잘못된 문법으로 인해 서버가 요청을 이해할 수 없음
    * 401 : 미인증
    * 402 : 
    * 403 : 미인가
    * 404 : 요청받은 리소스를 찾을 수 없다
* 5xx : 서버에 문제가 있다
    * 500 서버에 문제가 있지만 구체적 설명 불가
    * 502 : 서버가 게이트웨이로부터 잘못된 응답 수신

## XSS
공격자가 악의적인 컨텐츠를 삽입하여 상대방의 브라우저에 악의적인 스크립트가 실행되도록 하는 것

왜 JWT 인가?
세션서버를 생성하지 않고 refresh token과 access token만을 이용해서 로그인을 유지시킬 수 있다.
이용자가 많아질수록 확보해야하는 세션이 늘어나며 세션방식 사용을 통해 얻을 수 있는 이득이 크지 않다고 생각했다

## CORS
CORS는 Cross-Origin Resource Sharing로 출처가 다른 자원을 공유하기 위한 정책이다.

Protocol, Host, Port 세 가지가 동일한 경우 동일한 출처

같은 출처에서만 리소스를 공유할 수 있는 규칙을 가지고 있었다. 하지만 여러 도메인으로 구성되는 웹이나 외부에서 호출, 외부의 자원을 사용하는 경우가 자주 있었기 때문에 예외적인 부분인 CORS를 사용하게 되었다

## 로드밸런서
트래픽을 여러 서버에 분산해주는 장치 또는 기술

트래픽을 여러 서버에 적절히 분산하여, 각 서버가 최적의 성능을 낼 수 있도록 돕습니다

라운드로빈, IP 해싱, 최소 연결 방식, 최소 리스폰 타임 

## 쿠키, 세션

## HTTP 요청 흐름

## HTTP와 HTTPS

## HTTPS

## 대치

## API Gateway
API 서버 앞단에서 모든 API 서버들의 엔드포인트를 단일화하여 묶어주고 API에 대한 인증, 인가, 라우팅, 프로토콜이나 포맷 변환 등 여러 기능을 담당

## 프록시? 리버스 프록시?

## DHCP