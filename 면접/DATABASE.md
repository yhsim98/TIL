## DB 락의 종류
트랜잭션의 무결성과 일관성을 유지하기 위해 사용하게 됩니다.

트랜잭션 처리의 순차성을 보장해주거나, 트랜잭션이 완벽히 끝날 때까지 다른 요청을 막아줍니다.

읽기 전용인 경우 사용하는 Shared Lock과 데이터를 수정할 때 사용하는  Exclusive Lock이 있습니다.

shared Lock의 경우는 같은 shared Lock 끼리는 접근을 혀용하지만 Exclusive Lock의 접근은 막습니다.

Exclusive Lock의 경우 모든 접근을 막습니다. 데드록이나 블로킹이 발생가능합니다.

Mysql의 경우 deadlock 감지를 통해 2개의 트랜잭션 중 데이터 변화가 적은 트랜잭션을 rollback 하게 합니다. 

## 인덱스에 대해 설명해주세요
테이블의 검색 속도를 높이기 위해 사용한 자료구조입니다. 

mysql의 내부 구현체인 InnoDB의 경우는 B+Tree로 인덱스를 구현하였습니다.

unique 하거나 PK면 자동으로 설정됩니다. 카디널리티가 높거나 자주 조회하는 열에 설정하면 좋습니다. 

조회 성능이 향상되지만 인덱스를 저장하는데 공간이 필요하게 됩니다. 또한 데이터 삽입시 인덱스처리를 하는 비용이 들고 update, delete 시 따로 인덱스의 변경없이 soft delete 처리를 하는데 이게 지속적으로 쌓이게 되면 인덱스테이블의 크기가 비대해져 오히려 성능이 떨어질 수 있습니다

## 캐시 전략에 대해 설명해주세요
lazy loading, time to live, write through 방식이 있습니다. 자세한 것은 구글링

## DB를 설계하는 과정에서 어려웠던 경험이 있다면 얘기해주세요
무결성과 성능 사이에서 고민을 많이 했던 것 같습니다. 회원과 비회원이 있었는데 회원과 비회원을 같은 테이블에 가지고 있기에는 너무 빈 값이 많아져 

회원과 비회원을 설계할 때 고민을 많이 했습니다. 회원과 비회원을 같은 테이블에 가지고 있기에는 너무 빈 칼럼이 많아졌고 나누기에는 서비스에서 id값이 겹칠 경우

슈퍼 서브 타입으로 해결

그 외에도 무결성과 성능, 테이블 크기, 등 고민이 많았음

아직 어느선까지 무결성을 지켜야 하는지 잘 모르겠다.

## 인덱스의 종류와 각각의 특징에 대해 설명해주세요
B-Tree, BITMAP 인덱스가 있다 

## constraints에 대해 설명해주세요
unique, pk, fk not null 등 자료에 대한 제약을 의미합니다.

## 무결성이란?
데이터의 정확성, 일관성, 유효성이 유지되는 것

개체, 참조, 키 무결성 등이 있다.

* 개체 무결성
    * 기본 키는 null이 아니고 unique해야 한다
* 참조 무결성
    * 외래키의 값은 null이거나 참조 릴레이션의 기본키 값과 동일해야 한다
    * 참조하는 깂은 존재하는 값이어야 한다

등이 있다.

## 정규화
갱신 이상의 발생 요인인 데이터 중복을 최소화하기 위해 제약조건을 기초로 릴레이션을 분해하는 과정

갱신 이상에는 삽입이상, 삭제이상, 수정이상이 있다.

* 삽입이상 : 의도하지않은 값까지 삽입해야 함
* 갱신이상 : 중복된 데이터 중 일부만 수정되어 모순이 일어나는 현상
* 삭제이상 : 유용한 다른정보도 함께 삭제되는 이상

테이블이 분리되어 조인이 필요해진다. 따라서 성능이 느려진다.

역정규화란 성능을 위하여 정규화 단계를 낮추는 것

* 1정규화
    * 원자값
* 2정규화 
    * 완전함수종속
    * 기본키의 부분집합에 종속적이면 안된다
* 3정규화
    * 이행적 종속
    * A->B, B->C  라면 A,B,C는 분리되어야 함
    * 갱신이상 생김

## 트랜잭션
DB의 논리적인 작업의 단위입니다.

원자성, 독립성, 일관성, 지속성 등의 특징이 있습니다.

일관성 : 트랜잭션이 성공적으로 완료되면 일관적인 DB상태를 유지해야 함

## commit, rollback
트랜잭션이 성공적으로 완료되어 해당 결과를 반영하는 것

트랜잭션이 실패하여 변경된 결과를 원래돼로 되돌리는 것

## Lock
트랜잭션 처리의 순차성을 보장해주기 위해 하나의 트랜잭션이 완벽하게 끝날 때까지 다른 요청을 막아주는 역할을 합니다.

shared lock, exclusive lock이 있다.

데이터를 변경하는 경우 상대방에 접근할 수 없다.

서로가 진행하기 위해 서로가 필요하다면 daedlock이 발생

트랜잭션을 자주 커밋하거나 