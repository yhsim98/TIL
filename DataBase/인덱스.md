# 인덱스란?
인덱스(영어: index)는 데이터베이스 분야에 있어서 테이블에 대한 동작의 속도를 높여주는 자료 구조를 일컫는다.

인덱스는 테이블 내의 1개의 컬럼, 혹은 여러 개의 컬럼을 이용하여 생성될 수 있다.

고속의 검색 동작뿐만 아니라 레코드 접근과 관련 효율적인 순서 매김 동작에 대한 기초를 제공한다.

인덱스를 저장하는 데 필요한 디스크 공간은 보통 테이블을 저장하는 데 필요한 디스크 공간보다 작다.
(왜냐하면 보통 인덱스는 키-필드만 갖고 있고, 테이블의 다른 세부 항목들은 갖고 있지 않기 때문이다.) 

관계형 데이터베이스에서는 인덱스는 테이블 부분에 대한 하나의 사본이다.

*출처: 위키피디아*

인덱스는 B-tree 자료구조를 이용하여 생성되게 된다. 해당 자료구조를 이용함에 따라 전수조사 하는 것보다 훨씬 빠르게 검색이 가능하다.

참고로 인덱스가 없으면 검색을 위해 모든 row를 전수조사하게 된다?

더 빠른 검색알고리즘인 Hash를 사용하지 않는 이유는 Between, <, > 등 범위 검색을 하는 경우 Hash로는 효과를 보기 어렵기 때문이다.

인덱스를 생성하는 방법은(Mysql의 경우) 

1. 기존의 테이블에 인덱스를 추가하기

    ALTER TABLE 테이블명 ADD INDEX(인덱스명(칼럼명));
    CREATE INDEX 인덱스명 ON 테이블명(칼럼명);

2. 테이블 생성시 인덱스 추가하기

    INDEX(필드명(크기)) ENGINE MyISAM;


# 인덱스 생성 기준
1. 크기가 큰 테이블만 만든다
크기가 작은 테이블은 인덱스나 풀 스캔이나 큰 차이가 없다.

2. 기본키 제약이나 유일성 제약이 부여된 칼럼에는 불필요하다
PK가 부여된 칼럼이나 유일성 제약이 부여된 칼럼은 자동으로 인덱스가 작성되어 있다.

3. 카디널리티가 높은 열에 만든다
특정 열에 대해 많은 종류의 값을 가지고 있다면 카디널리티가 높다고 한다. 

참고로 여러 칼럼을 이용해 인덱스를 만드는 경우 카디널리티가 높은 칼럼순으로 만드는게 성능 측면에서 좋다고 한다.


# 인덱스 장단점
장점 
* SQL문을 변경하지 않아도 테이블을 조회하는 속도와 그에 따른 성능을 향상시킬 수 있다
* 전반적인 시스템의 부하를 줄일 수 있다
* 테이블의 데이터에 영향을 주지 않는다

단점
* 인덱스를 관리하기 위해 DB의 약 10%에 해당하는 저장공간이 필요하다
* 인덱스를 관리하기 위해 추가 작업이 필요하다
* 인덱스를 잘못 사용할 경우 오히려 성능이 저하되는 역효과가 발생할 수 있다

만약 CREATE, DELETE, UPDATE가 빈번한 속성에 인덱스를 걸게 되면 인덱스의 크기가 비대해져서 성능이 오히려 저하되는 역효과가 발생할 수 있다. 그러한 이유 중 하나는 DELETE와 UPDATE 연산 때문이다. 앞에서 설명한대로, UPDATE와 DELETE는 기존의 인덱스를 삭제하지 않고 '사용하지 않음' 처리를 해준다고 하였다. 만약 어떤 테이블에 UPDATE와 DELETE가 빈번하게 발생된다면 실제 데이터는 10만건이지만 인덱스는 100만 건이 넘어가게 되어, SQL문 처리 시 비대해진 인덱스에 의해 오히려 성능이 떨어지게 될 것이다. 

출처: https://mangkyu.tistory.com/96 [MangKyu's Diary]

