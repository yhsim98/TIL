# 데이터베이스 구축의 6단계
1. 요구수집 및 분석
2. 개념적 설계
3. DBMS 선정
4. 논리적 설계
5. 물리적 설계
6. 구현 및 테스트

# 트랜잭션이란?
DB에서 작업의 기본 단위로서, 데이터를 일관되게 변경하는 하나 이상의 데이터 조작어 문장으로 구성됨.

# DB 설계 전략
* 데이터 중심 DB 설계
    * DB의 내용과 구조에 치중해서 설계하는 방법
* 처리 중심 DB 설계
    * 데이터의 처리와 응용에 치중해서 설계하는 방법
* 2가지를 병행해서 진행하는 것이 일반적이다

# DBMS 선정 기준
경제성, 논리적 데이터 모델, 운영환경등에 따라 결정해야 한다.

# DB구축 시 고려사항
* 무결성 
    * DB에 저장된 데이터가 제약조건을 만족해야 한다
* 일관성 
    * 저장된 데이터들 간에, 또는 특정 질의에 대한 응답들 간에 모순이 없어야 한다
* 회복
    * 시스템에 장애가 발생한 경우, 장애 발생 이전의 일관된 DB 상태로 복구 가능해야 한다
* 보안 
    * 불법적인 접근에 대해 보호 가능해야 한다
* 효율성 
    * 응답시간 단축, 저장 공간 최적화, 시스템의 생산성 등을 고려해야 한다
* 확장
    * 시스템에 영향을 주지 않고 새로운 응용 프로그램이나 데이터를 추가할 수 있어야 한다

# 요구 수집 및 분석 단계의 주요 업무
1. 사용자 그룹 및 담당자 식별
2. 요구사항 수집
    1. 사용자의 요구사항 수집
    2. 범 기관적 제약조건 파악
    3. 기존 문서 조사
3. 요구사항 분석
    1. 업무 영역 분할
    2. 상세 업무 분석
4. 요구 분석 명세서 작성
5. 수용 범위 결정

* 범 기관적 제약조건 예 : 표준 용어, 표준 코드, 표준 도메인 등

# 개념적 설계
요구 분석 명세서를 기초로 DBMS와는 무관한 추상적인 형태로 사용자의 요구를 표현하는 것

## 개념적 설계의 주요 업무
개념적 모델링 + 트랜잭션 모델링 

* 개념적 모델링
    * 데이터 중심 설계
    * 데이터 요구분석 명세서를 기초로 ER 모델 산출
    * 결과물 : ER 다이어그램
* 트랜잭션 모델링
    * 처리 중심 설계
    * 트랜잭션 요구 분석 명세서를 기초로 업무 단위의 유형별 트랜잭션 나열 
    * 결과물 : 트랜잭션 명세서

# DBMS 선정 기준
* 논리적 데이터 모델 
    * 개념적 설계 단계의 산출물인 개념적 DB 스키마를 가장 효율적이고 안정적으로 표현할 수 있는 논리적 데이터 모델을 기초로 하는 DBMS 선택
* 운영 환경
    * DB를 구축할 하드웨어 환경과 운영체제 등을 고려해서 운영 환경에 적합한 DBMS 선택
* 경제성
    * DBMS의 가격과 하드웨어 구입 비용, 교육 비용, 운영 비용, 유지 비용 등 경제적인 측면을 고려해서 DBMS선택

# 논리적 설계
개념적 데이터 모델(개념적 스키마)을 DBMS가 지원하는 논리적 데이터 모델(논리적 스키마)로 변환하는 것


논리적 모델링 -> 트랜잭션 인터페이스 설계 -> 스키마 평가 및 정제

* 논리적 모델링 
    * 릴레이션 스키마
    * 무결성 제약조건 정의


# 물리적 설계 
논리적 스키마(릴레이션 스키마와 무결성 제약조건)를 기초로 내부 스키마(물리적 데이터 구조)로 변환하는 것

물리적 모델링 + 트랜잭션 상세 설계


# 구현 및 테스트 단계
* 설계된 DB 구조를 DDL로 생성한다
* 기존 DB를 새로운 DB로 변환한다
* DB에 초기 데이터를 적재 한다
* 트랜잭션 처리용 응용 프로그램을 작성한다
* 유지보수를 위한 문서화 작업을 한다

# 테스트 단계
* 생성된 DB구조가 설계된 DB 구조와 일치하는지 확인
* 응용 프로그램과 DB의 연동이 원할한 지 확인
* 트랜잭션 유형별로 테스트 케이스를 선정하여, 데이터 조작이 원할한지 확인




# 요구 수집 및 분석
## 요구 수집 단계의 주요 업무
* DB에 대한 잠재적인 사용자를 식별하고, 사용자가 원하는 DB의 용도 파악
* DB가 제공해야 할 정보 내역 수집
* 요구 수집한 내역을 체계적으로 정리하여 요구 분석의 기초 자료가 될 수 있도록 **요구 수집 명세서 작성**

## 요구 수집 방법
* 요구를 수집할 사용자 그룹 및 업무 담당자 식별
    * 직, 간접적인 방법을 통해서 전체적인 요구 사항 수집
* 범 기관적인 제약조건 식별
    * 기관의 규정, 표준 용어, 표준 도메인 등 파악
* 기준 문서 조사
    * 각종 양식, 보고서, 응용 프로그램 관련 메뉴얼 등
* 운영 환경 파악
    * DB 운영할 컴퓨터 환경, 업무 환경 등
* 요구 수집 명세서 작성

## 요구 분석 단계 주요 업무
1. 업무 영역 분할
    * 다양한 요구 수집 산출물을 기초로 업무 영역 분할도 작성
2. 요구 분석 명세서 작성 
    * 업무별 데이터 요구 분석 명세서 작성
    * 업무별 트랜잭션 요구 분석 명세서 작성
3. 요구사항 수용 범위 결정
    * 우선순위가 높고 제한된 기한 내에 구현 가능한 요구사항만 수용

## 요구 분석이 중요한 이유
요구 분석에 오류가 발생하면 아무리 많은 시간과 노력을 투자해도 원하는 시스템을 구축하기 어려운 경우가 많기 때문

## 업무 영역 분할
### 업무 영역 분할도
* 전체 업무를 요구 분석의 기본 단위가 되는 소단위의 업무 영역으로 분할하여 계층구조 형태로 표현한 것
* 조직의 업무 영역 분할이 명확한 경우, 이 과정을 생략하고 기존에 분할된 업무 영역 단위로 요구사항을 분석해도 됨 

## 데이터 요구 분석 명세서
요구 분석 단계의 중요한 산출물로서, 데이터 중심 DB 설계에 근거하여 업무별로 요구되는 데이터를 분석한 결과를 문서화한 것으로, 일종의 업무처리 규정문이라고 볼 수 있음

* 개체들의 속성과 개체와 개체사이의 관계는 어떤 것이 있는지 찾는데 필요한 정보를 넣는다.
* 단순 데이터 처리가 아니라, 어떤 관련된 업무가 있는지 관계는 어떤지 등등
## 트랜잭션 요구 분석 명세서
요구 분석 단계의 중요한 산출물로서, **처리 중심 DB 설계**에 근거해서 업무별로 요구되는 트랜잭션 즉, **데이터 조작 작업**을 문서화한 것

데이터 조작의 주체는 상관없이 해당 데이터를 조작하는 모든 과정을 분석하는 것

## 트랜잭션 요구 분석 명세서 작성 시 유의사항
* 분할된 업무 영역별로 요구되는 데이터 조작 작업을 간단히 표현한다
* 한 번에 하나의 데이터 조작만 포함하도록 작성한다
* 데이터 조작을 가능한 검색, 삽입, 삭제, 변경이라는 용어를 사용해서 표현한다
* 추후 트랜잭션 처리용 응용 프로그램을 작성할 때 참조가 되도록 작성한다

## 요구 분석의 특성
* 요구사항은 계속 변화한다
* 요구사항은 점차 확장된다
* 요구사항은 불완전하다
* 요구사항은 생명주기가 있다

## 요구 분석 명세서 검토 질문
* 요구사항이 이해하기 쉬운가
* 정확히 표현되었는가
* 애매모호하지는 않는가
* 필요를 충족시키는가
* 빈드시 필요한가
* 기한내에 수용할 수 있는가



# 개념적 설계
요구 분석 명세서를 토대로 DBMS와는 무관한 추상적인 형태의 사용자의 요구사항을 표현하는 것

## 개념적 설계 단계의 2가지 주요 업무
* 개념적 모델링
    * 데이터 중심의 DB 설계에 해당하며, 데이터 요구 분석 명세서를 기초로 ER 모델을 산출하고, ER 다이어그램으로 표현함
    * 개념적 스키마 모델링이라고도 칭함
* 트랜잭션 모델링
    * 처리(프로세스) 중심의 DB 설계에 해당하며, 트랜잭션 요구 분석 명세서를 기초로 업무 단위의 유형별 트랜잭션을 설계함

## 개념적 모델링
요구 분석 명세서를 토대로 DBMS와는 무관한 추상적인 형태로 사용자의 요구사항을 표현하는 것

ER 모델로 표현한다. ER 다이어그램으로 표현한 개념적 모델링 결과를 개념적 구조 혹은 개념적 스키마라고 한다

## 개념적 모델링 방법
### ER 모델 도출 순서
* 명세서를 기초로 핵심 개체 타입 식별
* 개체간의 관계 타입 식별
* 관계타입의 유형과 카디널리티 결정
* 개체 타입의 속성 식별
* 개체 타입의 식별자(후보 키) 결정
* 관계 타입의 속성 식별
* 개체 타입과 관계 타입, 속성을 모두 ERD로 표현
* ERD가 모든 요구사항을 반영하는지 검증


### 개체 식별
* 개체
    * DB가 표현하려고 하는 유형, 무형의 정보 대상으로, "존재하면서 서로 구별될 수 있는 요소"
* 개체 식별의 중요성
    * 설계 단계에서 개체 식별은 중요하고, 어떤 개체가 식별되냐에 따라 속성과 관계가 달라질 수 있음
    * 개체 하나에 평균 5개 정도의 응용 프로그램이 개발되므로 개체 식별이 DB 구축의 성패를 좌우함

### 개체 식별 방법
* 개체 후보 식별
    * 데이터 요구 분석 명세서에서 주로 주어나 목적어로 표현된 것이 개체 후보
* 개체 후보 검토
    * 각 개체 후보의 실제 데이터 수와 대표 속성 파악
    * 동음이의어, 이음동의어 검토
    * 동사로 표현된 것이 개체로 잘못 추출된 것이 있는지 검토하고, 필요한 경우 개체 이름도 변경
* 최종 개체 선정
    * 실제 데이터가 2개 이상 존재하고, 2개 이상의 속성을 갖고 있는 개체 후보를 최종 개체로 선정
    * 동일한 의미를 갖는 개체가 있으면 제외시킴

### 개체 표현 방법
* 피터 첸 표기법
    * 하나 이상의 속성과 연결된 직사각형으로 표현하고, 식별자는 밑줄로 표시
* IE 표기법
    * 개체를 사각형으로 구분하고, 사각형 위에 개체 이름을 표시

### 개체 이름 부여 방법
* DB 내에서 유일
* 현업의 표준 용어를 사용
* 단수 명사사용
* 약어사용 하지말자
* 성격을 쉽게 알게
* 이름 부여 규칙을 미리 정하기
* 자료 사전 또는 용어 사전을 만들어 참조

### 개체 식별시 주의사항
* 개체가 될 가능성있는 모든 대상 추출하기
* 유사한 개체도 모두 추출하기
* 어떤 대상이 해당 개체에 속하는지 분명하도록 각 개체 정의하기
* 업무 처리 과정을 지나치게 고려하지 않기
* 개념은 확실히 잡고 가기
* 예외 상황은 일단 무시하고 넘어가기
* 최종적 선정되면 핵심 특징 파악하기

## 관계 식별
* 관계
    * 개체들 간의 의미 있는 연결 또는 연관성을 의미하는 요소 
### 관계 식별 방법
1. 명세서에서 동사로 표현된 부분이 관련성을 표현하는 경우
2. 식별된 개체중 관계로 표현하는 것이 더 적합한 경우
3. 관계 이름 부여
4. 관계 유형 설정
5. 관계를 설명하는 속성 파악
6. 관계 이름과 유형, 속성 등이 포함된 최종 관계 목록 작성

### 관계 식별 시 유의사항
* 관계는 개체들 간의 상호 연관성으로, 개체와 관련된 업무를 수행하는 일종의 업무 규칙에 해당 -> 주로 동사
* 업무를 충분히 파악한 다음 전체 업무를 고려해서 넓은 시각으로 분석
* 업무 규칙이 변경됨에 따라 관계도 변경될 수 있음
* 식별된 개체 가운데 '관계'로 표현하는 것이 적합한 것이 있는지 검토
* 관계는 관계에 포함된 양쪽 개체의 식별자를 속성으로 갖게 됨

### 관계 표현 방법
* 피터 첸
* IE

### 관계 이름 부여 방법
* 가능한 두 개체의 연관성을 나타내는 동사
* 현재 시제
* 개체들 간의 관련성이 명확하도록 표현
* 관계 이름은 DB 내에서 유일해야 함
* 부연 설명이 필요없는 일반적인 용어로 표현

## 속성 식별
### 속성 식별 방법
1. 데이터 요구 분석 명세서에서 개체를 설명하는 명사를 속성으로 식별
2. 관계를 설명하는 명사를 관계속성으로 식별
3. 후보키가 없으면 후보키 역할을 할 속성 추가
4. 추가적으로 필요한 속성 식별


### 유의사항
* 유일한 식별자
* 가능한 모든 속성 식별
* 필요한 경우 속성 이름 변경

### 식별자 관련 유의사항
* 모든 개체는 하나 이상의 식별자(후보 키)를 포함
* 식별자는 반드시 유일한 값을 가져야 함
* 식별자는 불변값
* 최종 식별자 즉 기본키는 논리적 모델링 단계에서 식별자 가운데 하나를 선택해서 결정 가능

### 속성 표현 방법
* 피터 첸
    * 각 속성은 타원
    * 후보키는 밑줄
* IE
    * 식별자와 설명자를 구분해서 표현

### 이름 부여 방법
* 한 개체 안에서는 유일해야 함
* 유지보수할때 불편하니까 개체 이름을 속성 이름의 접두어로 사용하지 않는다
* 현업의 표준 언어 사용
* 단어와 단어는 '_' 로 연결


## ER 다이어그램 작성
1. 개체 타입 표시
2. 개체 타입들 간의 관계 표시
3. 관계 타입의 유형 표시
4. 관계 타입의 카디널리티 표시
5. 개체 타입의 속성 표시
6. 관계 타입의 속성 표시


# 트랜잭션 모델링
## 트랜잭션이란?
* 하나의 논리적 기능을 수행하기 위한 작업 단위로서, 데이터를 일관되게 변경하는 하나 이상의 데이터 조작 명령문으로 구성됨
* DB의 무결성이 보장되는 상태에서 요청된 작업을 완수하기 위한 작업의 기본 단위로 간주됨

## 트랜잭션 모델링 주요 업무
업무 단위별로 데이터 조작 작업을 유형별로 세분해서 명세서 작성, 데이터 조작과 관련된 제약조건도 정의

## 트랜잭션 모델링의 필요성
* 주요 트랜잭션의 기능적 요구사항을 DB 설계 초기에 파악할 수 있음
* 추후 구축 단계에서 트랜잭션을 처리하는 응용 프로그램을 작성할 때 기초 자료가 됨
* 스키마에 트랜잭션이 필요로 하는 정보가 모두 포함되어 있는지 확인 가능

트랜잭션 요구 분석 명세서 -> 트랜잭션 모델링 -> 트랜잭션 명세서

## 트랜잭션 명세서 작성 방법
* DB 설계에 반영할 필요가 있는 주요 트랜잭션을 식별한 다음, 각 트랜잭션의 내부적인 제어 흐름을 파악해서 트랜잭션의 유형을 구분함
* 입력 및 출력 정보 표시 및 트랜잭션의 상대적인 중요도 등 작성

## 트랜잭션 모델링 단계에서 트랜잭션 유형 구분
* 삽입, 삭제, 변경, 검색, 혼합

## 제약조건 정의
ER 다이어그램에 없는 정보를 정의  




