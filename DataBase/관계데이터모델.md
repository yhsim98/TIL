# 관계데이터 모델
DB를 2차원 테이블 즉, 릴레이션의 집합으로 모델링하는 논리적 데이터 구조

# 모델 특징
* 개체와 관계가 모두 2차원 테이블(릴레이션)로 표현된다
* ER 모델을 관계 데이터 모델로 변형하는 것이 매우 쉽다

# 릴레이션과 테이블의 차이점
* 릴레이션은 다소 추상적인 개념이다
* 테이블을 릴레이션을 표현하는 구체적인 표현 방법
    * 하나의 릴레이션은 여러 가지 형태의 테이블로 표현될 수 있다
* 테이블은 중복되는 행을 허용하지만, 릴레이션은 중복되는 행을 허용하지 않는다

# 용어
## 튜블(Tuple)
릴레이션의 각 행(Row)로서, 개체에 대응

## 속성(Attribute)
릴레이션의 각 열(Column)로서, 이름을 가진 정보의 가장 작은 논리적인 단위

## 도메인(Domain)
한 속성이 취할 수 있는 모든 원자 값의 집합을 의미함
(데이터 타입, 크기, 형식, 제한 범위, Not Null 여부 등으로 정의함)

## 기수(Cardinality)
하나의 릴레이션이 갖는 튜플의 수를 의미함

## 차수(Degree)
하나의 릴리에션이 갖는 속성의 수를 의미함

## 릴레이셔 스키마(Relation Schema) 
릴레이션을 구성하는 속성들의 집합을 의미함

## 릴레이션 인스턴스(Relation Instance)
릴레이션을 구성하는 튜플들의 집합을 의미함

## 릴레이션 (Relation)
행과 열로 구성된 2차원 구조로서, 릴레이션 스키마와 릴레이션 인스턴스가 합쳐진 개념

## 키(Key)
튜플들을 유일하게 식별할 수 있는 속성 또는 속성들의 집합을 의미함


# 릴레이션(Relation) 이란?
* 행과 열로 구성된 2차원 테이블 구조로서, 각 행은 튜플이고, 각 열은 속성
* 릴레이션 스키마와 릴레이션 인스턴스가 합쳐진 개념

# 릴레이션 스키마란?
* 릴레이션을 구성하는 속성들의 집합을 의미함
* 시간에 따라 변경되지 않는 정적인 성질을 가짐
* 표기법 R(A1, A2, A3)

# 릴레이션 인스턴스란(Relation Instance)
* 릴레이션을 구성하는 튜플들의 집합으로, 릴레이션의 내용
* 즉 어느 한 시점에 릴레이션 R이 포함하고 있는 튜플들의 집합
* 삽입, 삭제, 갱신으로 인해 시간에 따라 변경되는 동적인 성질을 가짐

* 그냥 릴레이션이라고 하면, 릴레이션 인스턴스를 의미한다


# 릴레이션의 특징
* 튜플의 유일성
    * 하나의 릴레이션에 포함된 튜플들은 모두 서로 달라야 함
    * 릴레이션에는 항상 튜플을 유일하게 식별할 수 있는 키가 존재해야 함
* 튜플의 무선서성
    * 하나의 릴레이션에서 튜플들의 순서는 아무런 의미가 없다
* 속성의 무순서성
    * 하나의 릴레이션에서 속성들의 순서는 아무런 의미가 없다
* 속성의 유일성
    * 하나의 릴레이션에는 같은 이름을 갖는 속성은 존재할 수 없다
* 속성의 원자성
    * 모든 속성은 반드시 원자 값을 가져야 함
    * 속성 값은 논리적으로 더 이상 분리될 수 없으며, 여러 개의 값을 갖는 속성은 직접 표현할 수 없다
    * 원시적 데이터 형의 값만 표현, 널 값도 원자 값으로 간주함

# 관계 데이터베이스란?
* 관계 DB의 구성
    * 관계 DB는 릴레이션들의 집합으로 구성됨
* 관계 DB 스키마
    * 하나 이상의 릴레이션 스키마와 무결성 제약조건들로 정의됨

* 무결성 제약조건 : 데이터의 정확성과 일관성 유지를 위해 DB가 항상 만족시켜야 하는 조건


# 키(Key)란?
릴레이션을 구성하는 튜플들을 유일하게 식별할 수 있는 속성 또는 속성들의 집합

## 후보 키란?
릴레이션의 전체 속성 집합 A의 부분집합이면서, 유일성과 최소성을 모두 만족하는 속성 집합 K({A1, A2 ...})

* 유일성 : K는 각각의 튜플을 유일하게 식별할 수 있어야 함
* 최소성 : K는 각각의 튜플을 유일하게 식별하는데 필요한 최소의 속성만 포함해야 함
 
## 기본 키(Primary key)란?
후보 키 가운데 DB설계자가 지정한 하나의 후보 키(나머지는 대체 키)

## 슈퍼 키란?
유일성은 만족하지만 최소성이 만족되지 않는 속성 집합

## 외래 키란?
참조 릴레이션 R의 어떤 속성 집합 FK가 피참조 릴레이션 S의 기본 키일 때, 이 FK를 참조 릴레이션 R의 외래 키라 칭한다.

* 외래 키의 특징
    * 릴레이션 S의 기본 키 도메인과 동일해야 함
    * 외래 키의 값은 릴레이션 S에 존재하는 값이거나 널 값을 가질 수 있음
    * 하나 이상의 테이블을 연결해서 사용하는 경우 필요함
    * 릴레이션 R과 S가 동일한 릴레이션인 경우도 있음
* 참조 릴레이션과 피참조 릴레이션
    * 참조 릴레이션 : 외래 키를 포함하는 릴레이션 R
    * 피참조 릴레이션 : 외래 키가 참조하는 기본 키를 포함하는 릴레이션 S
    * 릴레이션 R은 외래 키(FK)를 통해 릴레이션 S를 참조한다

### 외래 키 유형
* 다른 릴레이션 참조
* 같은 릴레이션 참조하는 외래키
* 외래 키가 기본 키의 구성 요소가 되는 경우

# 무결성 제약조건(Integrity Contraints)이란?
DB에 저장된 데이터의 정확성과 일관성 유지를 위해 DB가 항상 만족해야 하는 조건 의미함

## 무결성 제약조건 구분
* 개체 무결성 제약조건
    * 기본키는 널값을 가질 수 없다
* 참조 무결성 제약조건
    * 외래 키는 반드시 피참조 릴레이션의 기본 키 값이나 널 값을 가져야 함
* 도메인 무결성 제약조건
    * 특정 속성은 반드시 미리 정해진 도메인의 값을 가져야 함(데이터 타입, 크기, 디폴트 값, 널 값 허용, 범위 등)


# 무결성 제약조건 정의 방법
1. 묵시적 정의
    * 릴레이션을 정의할 때 기본 키와 외래 키를 정의하면, 개체 무결성과 참조 무결성이 묵시적으로 정의됨
    * DB가 갱신될 때마다 DBMS가 자동으로 제약조건의 만족 여부 검사
2. 명시적 정의
    * 도메인 무결성 제약조건은 명시해야 함
    * 디폴트 값, 널 값 허용 등을 릴레이션을 생성할 때 함께 정의해야 함
    * 명시적으로 정의하지 않은 제약조건은 응용 프로그램에서 별도로 처리해야 함
