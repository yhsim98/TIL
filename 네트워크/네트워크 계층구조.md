[통신 프로토콜과 계층 구조](#통신-프로토콜과-계층-구조)
[네트워크 응용 계층 원리](#네트워크-응용-계층-원리)
[네트워크 트랜스포트 계층](#네트워크-트랜스포트-계층)

# 통신 프로토콜과 계층 구조
* 통신 프로토콜 정의
    * 통신 장치들간에 교환될 메시지의 형식 정의
    * 메시지 교환 순서 정의
    * 메시지를 교환할 때 수행해야 할 행위를 정의

* 계층 구조의 장점
    * 새로운 프로토콜 정의 용이
    * 특정 통신 기능 또는 서비스 수정 용이
    * 전체 시스템 이해 용이
* 계층 구조의 단점
    * 최적 시스템 구현의 어려움(프로토콜 단위 사용, 계층간 서비스 인터페이스 구현)

 * 프로토콜
    * 특정 통신 서비스를 위한 정보 교환 규칙 정의
    * 유사한 통신 서비스를 위해 유사한 프로토콜 다수 정의 가능
    * 물리 매체 프로토콜 : UTP, 광케이블, 무선 채널
    * 인터넷 응용 프로토콜 : HTTP(웹 서비스), SMTP(이메일 서비스)
* 계층
    * 유사한 프로토콜들의 집합
    * 1개의 계층에 다수의 프로토콜 존재 가능

# 계층 구조 모델
* TCP/IP 계층 구조
    * 인터넷 프로토콜 구조
    * 5 계층 구조
* OSI 구조
    * ISO에서 정의
    * 7계층 구조
    * 실제 사용되지 않고 참조 모델로 활용

![](https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=http%3A%2F%2Fcfile26.uf.tistory.com%2Fimage%2F99BDD3335A2CEAB81D3BA5)


## 응용 계층
* 인터넷 최종 사용자 서비스를 위한 정보 교환 규칙 정의
    * 교환할 정보에 대한 규칙
* 사용자 서비스 종류에 따라 서로 다른 응용 프로토콜 정의
* 웹 서비스 : HTTP
* 이메일 서비스 : SMTP
* 파일 전송 서비스 : FTP
* 도메인 네임 서비스 : DNS

## 트랜스포트 계층
* 응용 계층 프로토콜 간에 메시지를 작은 전송단위(segment)로 나누고 전송하는 규칙 정의
    * 정보 교환에 관한 규칙
    * 양쪽이 같은 프로토콜이어야 함
* 응용 프로토콜 지정(End-point, port 번호)
    * 응용프로토콜 지정
        * 어디로 가는지 지정
* 오류 제어(Error control)
    * 오류 발생시 복구하는 절차
* 흐름 제어(Flow control)
    * 수신자가 수신할 수 있는 양만 보냄
* 혼잡 제어(Congestion control)
    * 트래픽이 몰려서 큐에 공간이 없는 등의 상황제어 
* TCP(Transmission Control Protocol), UDP(User Datagram Protocol)

## 네트워크 계층
* 네트워크 상에서 최적 경로를 찾는다
* 출발지 트랜스포트 프로토콜의 전송단위(segment)를 네트워크 전달 단위인 데이터그램(Datagram)으로 변환
* 목적지 트랜스포트 프로토콜까지 데이터그램을 최적의 경로를 통해 교환하고 전달
* 데이터그램 전달 프로토콜 : IP
* 최적 경로 찾기 프로토콜 : Routing Protocol

## 링크 계층
* 네트워크 경로를 구성하는 각 링크상에서, 네트워크 전송단위(데이터그램)을 프레임으로 변환하고, 링크의 끝까지 전송하는 규칙 정의
* 링크의 유형에 따라 다양한 링크 프로토콜 정의
* 유선 LAN : Ethernet 
* 무선 LAN : WIFI

## 물리 계층
* 디지털 비트와 물리적인 신호의 변환과 물리 매체 접속 규격 정의
* 물리 매체의 유형에 따라 다양한 물리 프로토콜 정의
* Ethernet 링크를 위해 UTP, 광케이블 물리 프로토콜 정의
* WIFI 채널의 디지털 비트와 물리 신호의 변환 방법에 따라 다양한 물리 프로토콜 정의

## OSI 프레젠테이션 계층
* 응용 프로토콜이 교환하는 정보의 의미를 동일하게 해석하도록 표현하는 규칙 정의
* 데이터 표현, 압축 방식, 암호 방식 등
* TCP/IP 구조에서는 필요한 경우 응용 프로토콜에서 정의

## OSI 세션 계층
* 점검 점 입력으로 교환되는 정보를 구분하고, 교환정보를 상호 동기화하며, 복구할 수 있는 규칙 정의
* TCP/IP 구조에서는 필요한 경우 응용 프로토콜에서 정의

# 갭술화
* 프로토콜 교환 정보
    * 프로토콜에 정보 보내달라고 의뢰, 데이터 정보에 제어 정보까지 붙여서 보냄
    * 데이터 정보(data information) : 사용자가 통신 상대방 사용자에게 전송을 의뢰한 정보
    * 제어 정보(Control information) : 프로토콜의 규칙을 수행하기 위해 상대방 프로토콜에게 제공하는 정보


# 네트워크 응용계층 원리
## 네트워크와 네트워크 응용
네트워크 응용 서비스 
* 네트워크 통신 서비스를 사용/응용 하여 최종 사용자에게 제공되는 서비스
* 네트워크에 연결된 2개 이상의 호스트에서 동작하는 프로그램으로 구현

네트워크 구성
* 호스트 : 응용 정보(URL, HTML 페이지)를 교환하고 해선하고 처리
* 스위치(라우터) : 네트워크 장치를 연결하고 패킷을 교환

패킷
* 응용 정보를 효율적인 교환을 위해 작은 크기로 나눈 정보단위
* 호스트에서 재조립되어 응용 계층에서 처리


의미있는 정보를 주고 받는 **호스트**들에서 동작하는 네트워크 응용

스위치는 응용 정보 처리에 관여하지 않는다. 단지 정보를 패킷으로 나눠 전달하는 역할만 한다.


## 네트워크 응용 구조
분산 네트워크 응용 프로그램이 작동하는 방식

네트워크 응용 구조 유형
* 클라이언트-서버 구조
* P2P 구조

### 클라이언트-서버 구조
동작방식
* 항상 클라이언트 응용 프로그램은 요청한다
* 서버의 응용 프로그램은 응답을 수행한다

클라이언트(Client)
* 서버에게 응용 서비스 요청(클라이언트간 통신 No)
* 필요할 때만 작동
* 동적(임시) IP 주소 사용 가능
    * 필요할때마다 사용하면 되니 동적이다

서버
* 다수의 클라이언트의 서비스 요청에 응답
* 항상 작동(Always-on)
* 고정(또는 그에 준하는) IP 주소 사용
* 확장성(scalability) 문제


### P2P 구조
동작방식
* 임의의 호스트간에 직접 통신한다
* 각 호스트는 클라이언트 역할과 서버 역할을 동시에 수행한다
* 호스트간의 관계가 대등하다(peer-to-peer)

장점
* 서버 의존성이 없음
* 구축 및 관리 비용이 낮음
* 자가 확장성(Self-scalability)

문제점
* 보안 취약성(Security)
* 낮은 신뢰성(Reliability)
* 낮은 성능(Performance)


## 네트워크 응용 프로세스와 응용 프로토콜
네트워크 응용 프로세스 
* 호스트에서 네트워크를 통해 응용 메시지를 교환하며 작동하는 프로그램

응용 프로토콜
* 네트워크 응용 프로그램 간의 응용 메시지 교환
* 응용 프로세스의 일부

클라이언트 프로세스
* 통신을 개시하는 응용 프로세스

서버 프로세스
* 클라이언트의 통신 요청을 기다리는 응용 프로세스



## 네트워크 응용 프로세스와 트랜스포트 프로토콜
소켓(socket)
* 응용 프로세스가 네트워크로 메시지를 송신하고 수신하는 통로 자료구조
* 트랜스포트 계층 상에서 구현
* 어플리케이션 프로세스가 사용하는 소켓 자료구조의 주소를 Port번호라 한다

소켓 API
* 소켓 자료구조를 사용하여 통신 서비스를 제공하는 프로그램 인터페이스
* API를 사용하여 응용 프로그램 구현

응용 프로세스 주소
* Socket 주소 : IP 주소 + Port 번호
    * 하나의 Host에 여러 어플리케이션 프로세스가 동작할 수 있다
    * 그러므로 IP주소만 가지고는 유니크한 어플리케이션 주소를 가질 수 없다
    * 그러므로 IP주소와 Port 번호를 합하여 어플리케시션의 주소를 가리키는 실제 주소가 되고 이 주소로 통신하게 된다

트랜스포트 프로토콜
* TCP
    * 응용 프로세스간 신뢰 전송
    * 저성능 전송
* UDP
    * 응용 프로세스간 비신뢰 전송
    * 고성능 전송

# 네트워크 트랜스포트 계층
## 네트워크 계층 서비스
호스트(Host)간의 통신
* 인터넷 호스트간의 통신에는 패킷을 전달한다
    * 데이터 통신의 단위
* 호스트의 인터넷 통신장치로 NIC(Network Interface Card)를 사용한다
    * PC 또는 스마트폰에 부착되어 네트워크 계층 이하의 통신 서비스를 담당하는 장치
    * 호스트의 NIC가 목적지의 NIC로 패킷(데이터그램)을 전달한다

최선형(Best-effort) 서비스
* 자원이 허락하는 범위내에서 최적의 통신 서비스 제공
* 자원이 부족한 경우 지연시간 발생, 패킷 훼손/손실 발생 가능 : 비 신뢰 서비스
    * 버퍼 오버플로 등으로 패킷 손상 가능

비연결성(Connectionless) 서비스
* 패킷 전달 경로가 다를 수 있음
* 패킷 도착 순서가 바뀔 수 있음

IP(Internet Protocol)
* IP 주소 기반의 패킷(데이터그램) 전달
* IP 주소 : 인터넷에 연결된 NIC(호스트) 구분

### 응용 프로세스 간의 통신
네트워크 계층의 통신은 NIC에서 목적지의 NIC에 데이터그램을 전달하는 것이다. 이런 네트워크 계층의 프로토콜 이름이 IP 이다.

한 호스트 내에서는 프로세스가 여러 개 존재할 수 있다. 트랜스포트 계층은 IP가 제공하는 통신 서비스를 이용해서 호스트의 한 프로세스와 목적지에 있는 특정한 프로세스까지의 통신 서비스를 담당한다. 네트워크 계층의 IP를 사용하기 때문에 포함한다고 볼 수 있다.

어플리케이션의 프로세스와 프로세스 간의 통신서비스를 제공하는 것을 담당하는 것이 트랜스포트 계층이다.

