# UDP
비신뢰성/고속 전송 프로토콜

# UDP 서비스
포트번호 기반의 다중화 서비스
* 서버 : Well-known Port
    * DNS는 서버의 주소로 이것만 가지고는 서버의 웹 서버로 접근할 수 없다
    * 따라서 미리 할당된 well known한 포트가 있어야 한다
    * 웹 서버의 경우는 80포트이다
* 클라이언트 : Ephemeral Port
    * 클라이언트는 필요시 서버에 접속하는 것이기 때문에 외부에서 사용자의 클라이언트에 접속할 필요가 없다
    * 서버에 접속할 때 클라이언트의 포트번호를 알려주면 되기 때문에 필요할 때마다 임시 포트번호를 생성하여 서버에 알려주면 된다

비연결성(connectionless) 전송 서비스
* 통신하는 소켓 간에 연결 설정이 없다
    * 연결 설정 지연시간 회피
* 소켓간의 handshaking 과정이 없기 때문에 데이터를 받기 전 응용 프로세스에서는 어떤 포트에서 데이터를 보냈는지 사전에 알 방법이 없다. 따라서 수신하는 소켓에서 응용 프로세스에 어떤 소켓이 보냈는지 알려줘야 한다

데이터그램 실시간 전송 서비스
* 응용 프로세스로부터 데이터가 송신 소켓에 전달되면,
* 송신 UDP는 해당 데이터를 포함하는 UDP 데이터그램(datagram)생성
    * UDP는 TCP와 달리 데이터를 전송하기 위해 하는 일이 거의 없다
    * 실시간 전송
* 각 데이터그램은 IP를 통해 독립적으로 목적지 UDP 소켓에 전송
* 응용
    * 인터넷 전화 등 실시간 응용에 적합
    * DNS등 작은 데이터, 빠른 응답 지연시간이 요구되는 응용에 적합하다

1 : N, N : 1 데이터그램 통신 서비스
* 목적지 IP 주소에 멀티캐스트 주소를 사용하여 다수의 목적지 소캣으로 데이터그램 전송 가능
* 여러 개의 소켓으로부터 데이터를 수신가능
* 응용 프로세스는 송신할 때마다 UDP에게 수신 소켓주소 지정
* UDP가 응용 프로세스에게 데이터를 전달할 때마다 송신 소켓주소 표시
* 응용
    * 인터넷 TV 등 멀티캐스트 응용 효과적 지원

# UDP 데이터그램 구조
간단한 데이터그램 포맷을 가진다

![](https://rookieboxsite.files.wordpress.com/2017/10/20171018123805.png)

이게 IP 데이터그램의 data에 들어가게 된다

# 검사합(checksum)
1의 보수 연산
* 각 비트 값 0과 1을 서로 바꾼 값
* +0 : 모든 비트가 0, -0 : 모든 비트가 1

m비트 이진수의 1의 보수 덧셈
* m비트 결과 값 생성
* 최종 비트 올림이 생길 경우 캐리 값을 m 비트 결과에 더하여 최종 m비트 결과값 생성


## 송신자
1. 송신하는 메시지를 정해진 길이의 데이터 단위로 나눔
2. 모든 데이터 단위를 1의 보수 연산으로 더하여 합을 구함
3. 합의 1의 보수를 검사합으로 생성하고, 검사합을 추가하여 메시지 전송

## 수신자
1. 수신된 메시지를 정해진 길이의 데이터 단위로 나눔(검사합 포함)
2. 모든 데이터 단위를 1의 보수 연산으로 더하여 합(sum)을 구함
3. 합이 0이면 성공적인 수신, 아니면 오류 발생

## 장점
* 높은 오류 검출 능력
* 단순함
* 소프트웨어 구현에 적합

## 단점
* 각 데이터 단위에서 발생하는 오류의 합이 0이 되는 오류 검출 불가
* 체크섬을 변경하지 않는 오류 검출 불가






